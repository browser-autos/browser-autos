# Browser.autos å¼€å‘è¿›åº¦

## é¡¹ç›®æ¦‚è¿°

Browser.autos æ˜¯ä¸€ä¸ªåŸºäº Playwright Chromium çš„ç”Ÿäº§çº§æµè§ˆå™¨è‡ªåŠ¨åŒ– API å¹³å°ï¼Œæä¾› REST API å’Œ WebSocket CDP ä»£ç†æœåŠ¡ã€‚

---

## æœ€æ–°è¿›åº¦ï¼ˆv1.0.1 - 2025-10-11ï¼‰

### ğŸ¯ v1.0.1 ä¸»è¦å˜æ›´

#### 1. **æ¶æ„é‡æ„**
- âœ… å‰åç«¯ä»“åº“å®Œå…¨åˆ†ç¦»
  - åç«¯ APIï¼š`browser-autos/browser-autos`ï¼ˆæœ¬ä»“åº“ï¼‰
  - å‰ç«¯ç½‘ç«™ï¼š`browser-autos/site`ï¼ˆç‹¬ç«‹ä»“åº“ï¼‰
- âœ… æ‰å¹³åŒ–é¡¹ç›®ç»“æ„
  - ç§»é™¤ `backend/` åµŒå¥—å±‚çº§
  - æ‰€æœ‰ä»£ç ç›´æ¥åœ¨æ ¹ç›®å½•ï¼š`src/`, `docs/`, `docker/`, `tests/`
  - ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™

#### 2. **å“ç‰ŒåŒ–å‡­æ®ç³»ç»Ÿ**
- âœ… ç¯å¢ƒå˜é‡é…ç½®å‡­æ®ï¼Œé¿å…ç¡¬ç¼–ç 
  - é»˜è®¤ç®¡ç†å‘˜ï¼š`browserautos` / `browser.autos`
  - é»˜è®¤ API ç”¨æˆ·ï¼š`api-user` / `browser.autos`
- âœ… å¯åŠ¨æ—¶åœ¨æ—¥å¿—ä¸­æ˜¾ç¤ºå‡­æ®
- âœ… åˆ›å»º `scripts/get-token.sh` å¿«é€Ÿè·å– token
- âœ… æ–°å¢ `docs/CREDENTIALS_GUIDE.md` å®Œæ•´å‡­æ®ç®¡ç†æŒ‡å—

#### 3. **æ–‡æ¡£å®Œå–„**
- âœ… æ›´æ–°æ‰€æœ‰æ–‡æ¡£çš„ Docker ç¤ºä¾‹ï¼ˆæ·»åŠ å‡­æ®ç¯å¢ƒå˜é‡ï¼‰
- âœ… README æ¢å¤ logo å’Œå®Œæ•´å†…å®¹
- âœ… åˆ é™¤å†—ä½™çš„ README_OLD.md
- âœ… æ‰€æœ‰è·¯å¾„å¼•ç”¨æ›´æ–°ï¼ˆ`backend/` â†’ æ ¹ç›®å½•ï¼‰

#### 4. **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**
- âœ… å‰ç«¯ç½‘ç«™æ·»åŠ  Token è·å–æŒ‡å—
  - æ˜¾ç¤ºé»˜è®¤å‡­æ®
  - æä¾›æŸ¥çœ‹æ—¥å¿—å‘½ä»¤
  - æä¾›ç™»å½• API ç¤ºä¾‹

---

## å·²å®ŒæˆåŠŸèƒ½ï¼ˆv1.0.0ï¼‰

### æ ¸å¿ƒ API æœåŠ¡
- âœ… **Screenshot API** - ç½‘é¡µæˆªå›¾ï¼ˆPNGã€JPEGã€WebPï¼‰
- âœ… **PDF Generation API** - PDF ç”Ÿæˆï¼ˆå¤šç§é¡µé¢æ ¼å¼ï¼‰
- âœ… **Content Extraction API** - å†…å®¹æå–ï¼ˆHTMLã€æ–‡æœ¬ã€å…ƒæ•°æ®ï¼‰
- âœ… **Scrape API** - æ•°æ®æŠ“å–ï¼ˆCSS é€‰æ‹©å™¨ï¼‰
- âœ… **WebSocket CDP Proxy** - ç›´æ¥ CDP åè®®è®¿é—®

### æ ¸å¿ƒç»„ä»¶
- âœ… **Browser Pool** - æµè§ˆå™¨å®ä¾‹æ± ï¼ˆæ€§èƒ½æå‡ 85%ï¼‰
- âœ… **Session Manager** - ä¼šè¯ç®¡ç†ï¼ˆè¶…æ—¶ã€æ¸…ç†ã€è¿½è¸ªï¼‰
- âœ… **Queue Manager** - ä»»åŠ¡é˜Ÿåˆ—ï¼ˆRedis + Bullï¼‰
- âœ… **Authentication** - JWT + API Key åŒé‡è®¤è¯
- âœ… **Prometheus Metrics** - ç›‘æ§æŒ‡æ ‡

### éƒ¨ç½²å’Œæ–‡æ¡£
- âœ… **Docker æ”¯æŒ** - å¤šæ¶æ„é•œåƒï¼ˆAMD64 + ARM64ï¼‰
- âœ… **Docker Compose** - å®Œæ•´éƒ¨ç½²é…ç½®
- âœ… **API æ–‡æ¡£** - Swagger/OpenAPI
- âœ… **æµ‹è¯•å¥—ä»¶** - å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯•

---

## é¡¹ç›®ç»“æ„

```
browser-autos/
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ rest/         # REST API ç«¯ç‚¹
â”‚   â”‚   â””â”€â”€ websocket/    # WebSocket ä»£ç†
â”‚   â”œâ”€â”€ core/             # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ browser/      # æµè§ˆå™¨æ± 
â”‚   â”‚   â”œâ”€â”€ session/      # ä¼šè¯ç®¡ç†
â”‚   â”‚   â””â”€â”€ queue/        # é˜Ÿåˆ—ç®¡ç†
â”‚   â”œâ”€â”€ services/         # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ middleware/       # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ types/            # TypeScript ç±»å‹
â”‚   â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”‚   â”œâ”€â”€ CREDENTIALS_GUIDE.md
â”‚   â”œâ”€â”€ DOCKER_README.md
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ docker/                # Docker é…ç½®
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ docker-compose.yml
â”‚
â”œâ”€â”€ tests/                 # æµ‹è¯•ä»£ç 
â”‚   â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ integration/
â”‚   â””â”€â”€ e2e/
â”‚
â”œâ”€â”€ scripts/               # å·¥å…·è„šæœ¬
â”‚   â””â”€â”€ get-token.sh
â”‚
â”œâ”€â”€ README.md              # è‹±æ–‡æ–‡æ¡£
â”œâ”€â”€ README_CN.md           # ä¸­æ–‡æ–‡æ¡£
â””â”€â”€ package.json
```

---

## ç¯å¢ƒå˜é‡é…ç½®

### å¿…éœ€é…ç½®
```bash
JWT_SECRET=your-secret-key    # JWT ç­¾åå¯†é’¥ï¼ˆå¿…éœ€ï¼‰
```

### å¯é€‰é…ç½®ï¼ˆå‡­æ®ï¼‰
```bash
# ç®¡ç†å‘˜å‡­æ®
DEFAULT_ADMIN_USERNAME=browserautos
DEFAULT_ADMIN_PASSWORD=browser.autos
DEFAULT_ADMIN_EMAIL=admin@browser.autos

# API ç”¨æˆ·å‡­æ®
DEFAULT_API_USERNAME=api-user
DEFAULT_API_PASSWORD=browser.autos
DEFAULT_API_EMAIL=api@browser.autos
```

### å…¶ä»–é…ç½®
```bash
# è®¤è¯
TOKEN_EXPIRY=30d
REQUIRE_AUTH=true

# æµè§ˆå™¨æ± 
BROWSER_POOL_MIN=1
BROWSER_POOL_MAX=5

# é˜Ÿåˆ—ç³»ç»Ÿ
ENABLE_QUEUE=false
REDIS_URL=redis://localhost:6379
```

---

## å¿«é€Ÿå¼€å§‹

### Docker éƒ¨ç½²
```bash
docker run -d -p 3001:3001 \
  -e JWT_SECRET=your-secret-key \
  -e DEFAULT_ADMIN_USERNAME=browserautos \
  -e DEFAULT_ADMIN_PASSWORD=browser.autos \
  --shm-size=2gb \
  browserautos/browser-autos:latest
```

### è·å– Token
```bash
# æ–¹å¼ 1ï¼šä½¿ç”¨è„šæœ¬
./scripts/get-token.sh

# æ–¹å¼ 2ï¼šæŸ¥çœ‹æ—¥å¿—
docker logs browser-autos | grep "Default credentials"

# æ–¹å¼ 3ï¼šç›´æ¥ç™»å½•
curl -X POST http://localhost:3001/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "browserautos", "password": "browser.autos"}'
```

---

## æ€§èƒ½æŒ‡æ ‡

| æ“ä½œ | å†·å¯åŠ¨ | ä½¿ç”¨æµè§ˆå™¨æ±  | æå‡ |
|------|--------|-------------|------|
| æˆªå›¾ | 7.6ç§’ | 1.2ç§’ | **85%** â†‘ |
| PDF | 8.0ç§’ | 2.0ç§’ | **75%** â†‘ |
| å†…å®¹æå– | 4.5ç§’ | 1.5ç§’ | **67%** â†‘ |

---

## æŠ€æœ¯æ ˆ

- **Runtime:** Node.js 20 + TypeScript
- **Framework:** Fastify
- **Browser:** Playwright Chromium 141.0.7390.37
- **Queue:** Bull + Redis
- **Monitoring:** Prometheus
- **Testing:** Jest
- **Container:** Docker (Multi-arch)

---

## ç›¸å…³ä»“åº“

- **åç«¯ API:** https://github.com/browser-autos/browser-autos
- **å‰ç«¯ç½‘ç«™:** https://github.com/browser-autos/site
- **Docker Hub:** https://hub.docker.com/r/browserautos/browser-autos

---

## ç‰ˆæœ¬å†å²

### v1.0.1 (2025-10-11)
- ğŸ—ï¸ æ¶æ„é‡æ„ï¼šå‰åç«¯ä»“åº“åˆ†ç¦»ï¼Œæ‰å¹³åŒ–é¡¹ç›®ç»“æ„
- ğŸ”‘ å“ç‰ŒåŒ–å‡­æ®ç³»ç»Ÿï¼šç¯å¢ƒå˜é‡é…ç½®ï¼Œå¯åŠ¨æ—¥å¿—æ˜¾ç¤º
- ğŸ“š æ–‡æ¡£å®Œå–„ï¼šæ›´æ–°æ‰€æœ‰è·¯å¾„å¼•ç”¨ï¼Œæ·»åŠ å‡­æ®ç®¡ç†æŒ‡å—
- âœ¨ ç”¨æˆ·ä½“éªŒï¼šå‰ç«¯æ·»åŠ  Token è·å–æŒ‡å—

### v1.0.0 (2025-10-10)
- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… æ ¸å¿ƒ API æœåŠ¡ï¼ˆScreenshot, PDF, Content, Scrapeï¼‰
- âœ… WebSocket CDP ä»£ç†
- âœ… Browser Pool å’Œ Session Manager
- âœ… JWT è®¤è¯å’Œ Prometheus ç›‘æ§
- âœ… Docker å¤šæ¶æ„æ”¯æŒ

---

## CI/CD å’Œ Docker è‡ªåŠ¨åŒ–

### GitHub Actions å·¥ä½œæµ

é¡¹ç›®ä½¿ç”¨ GitHub Actions è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ Docker é•œåƒã€‚

#### è§¦å‘æ¡ä»¶
- æ¨é€ç‰ˆæœ¬æ ‡ç­¾ï¼ˆ`v*`ï¼‰
- å‘å¸ƒ Release
- æ‰‹åŠ¨è§¦å‘ï¼ˆworkflow_dispatchï¼‰

#### è‡ªåŠ¨åŒ–æµç¨‹

```yaml
# .github/workflows/docker-publish.yml
tags: |
  type=semver,pattern={{version}}       # 1.0.1
  type=semver,pattern={{major}}.{{minor}} # 1.0
  type=semver,pattern={{major}}          # 1
  type=raw,value=latest,enable={{is_default_branch}}  # latestï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰
  type=raw,value=debian                  # debian
```

#### æ ‡ç­¾ç­–ç•¥

å½“æ¨é€ `v1.0.1` æ ‡ç­¾åˆ° `main` åˆ†æ”¯æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä»¥ä¸‹ Docker é•œåƒæ ‡ç­¾ï¼š

**Docker Hub:**
- `browserautos/browser-autos:1.0.1` ï¼ˆå®Œæ•´ç‰ˆæœ¬ï¼‰
- `browserautos/browser-autos:1.0` ï¼ˆä¸»ç‰ˆæœ¬ + æ¬¡ç‰ˆæœ¬ï¼‰
- `browserautos/browser-autos:1` ï¼ˆä¸»ç‰ˆæœ¬ï¼‰
- `browserautos/browser-autos:latest` âœ…ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰
- `browserautos/browser-autos:debian` ï¼ˆåŸºç¡€é•œåƒæ ‡è¯†ï¼‰

**GitHub Container Registry:**
- `ghcr.io/browser-autos/browser-autos:latest`
- `ghcr.io/browser-autos/browser-autos:1.0.1`
- ç­‰ç­‰

#### å¤šæ¶æ„æ”¯æŒ
- **å¹³å°:** `linux/amd64`, `linux/arm64`
- **æ„å»ºå·¥å…·:** Docker Buildx
- **QEMU æ”¯æŒ:** è·¨å¹³å°æ„å»º

#### è‡ªåŠ¨åŒ–åŠŸèƒ½
1. âœ… å¤šæ¶æ„é•œåƒæ„å»ºï¼ˆAMD64 + ARM64ï¼‰
2. âœ… è‡ªåŠ¨æ¨é€åˆ° Docker Hub å’Œ GHCR
3. âœ… è‡ªåŠ¨æ›´æ–° `latest` æ ‡ç­¾ï¼ˆä» main åˆ†æ”¯ï¼‰
4. âœ… è‡ªåŠ¨æ›´æ–° Docker Hub README
5. âœ… æ„å»ºç¼“å­˜ä¼˜åŒ–ï¼ˆGitHub Actions Cacheï¼‰

### å‘å¸ƒæµç¨‹

```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
npm version patch  # æˆ– minor/major

# 2. åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
git tag v1.0.1

# 3. æ¨é€åˆ° GitHub
git push origin main
git push origin v1.0.1

# 4. GitHub Actions è‡ªåŠ¨æ‰§è¡Œ
# - æ„å»ºå¤šæ¶æ„ Docker é•œåƒ
# - æ¨é€åˆ° Docker Hub å’Œ GHCR
# - æ›´æ–° latest æ ‡ç­¾
# - æ›´æ–° Docker Hub README

# 5. éªŒè¯å‘å¸ƒ
docker pull browserautos/browser-autos:latest
docker images browserautos/browser-autos
```

### å¸¸è§é—®é¢˜

#### Q: v1.0.1 ä¼šè‡ªåŠ¨æ›´æ–° latest æ ‡ç­¾å—ï¼Ÿ
**A:** âœ… ä¼šï¼åªè¦ç‰ˆæœ¬æ ‡ç­¾æ˜¯ä» `main` åˆ†æ”¯æ¨é€çš„ï¼ŒGitHub Actions ä¼šè‡ªåŠ¨æ›´æ–° `latest` æ ‡ç­¾æŒ‡å‘æœ€æ–°ç‰ˆæœ¬ã€‚

#### Q: å¦‚ä½•éªŒè¯ latest æ˜¯å¦å·²æ›´æ–°ï¼Ÿ
**A:** è®¿é—® Docker Hub æŸ¥çœ‹æ ‡ç­¾é¡µé¢ï¼š
```
https://hub.docker.com/r/browserautos/browser-autos/tags
```
æ£€æŸ¥ `latest` æ ‡ç­¾çš„ IMAGE ID æ˜¯å¦ä¸ `1.0.1` ç›¸åŒã€‚

#### Q: æ„å»ºéœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ
**A:** é€šå¸¸ 10-15 åˆ†é’Ÿï¼ˆå› ä¸ºéœ€è¦æ„å»º AMD64 å’Œ ARM64 ä¸¤ä¸ªæ¶æ„ï¼‰ã€‚

---

## å¼€å‘ç¬”è®°

### 2025-10-11 - Docker æ ‡ç­¾è‡ªåŠ¨åŒ–è¯´æ˜

**é—®é¢˜ï¼š** ç”¨æˆ·è¯¢é—®æ¨é€ `v1.0.1` æ ‡ç­¾åï¼Œ`latest` æ ‡ç­¾æ˜¯å¦ä¼šè‡ªåŠ¨æ›´æ–°ã€‚

**ç­”æ¡ˆï¼š** ä¼šè‡ªåŠ¨æ›´æ–°ã€‚GitHub Actions çš„ `docker/metadata-action` é…ç½®äº†ï¼š
```yaml
type=raw,value=latest,enable={{is_default_branch}}
```
è¿™æ„å‘³ç€ä» `main` åˆ†æ”¯æ¨é€çš„ç‰ˆæœ¬æ ‡ç­¾ä¼šè‡ªåŠ¨è§¦å‘ `latest` æ ‡ç­¾çš„æ›´æ–°ã€‚

**å·¥ä½œæµç¨‹ï¼š**
1. å¼€å‘è€…æ¨é€ `v1.0.1` æ ‡ç­¾
2. GitHub Actions è‡ªåŠ¨è§¦å‘æ„å»º
3. æ„å»ºå¤šæ¶æ„é•œåƒï¼ˆamd64 + arm64ï¼‰
4. è‡ªåŠ¨åˆ›å»ºå¤šä¸ªè¯­ä¹‰åŒ–ç‰ˆæœ¬æ ‡ç­¾
5. è‡ªåŠ¨æ›´æ–° `latest` æ ‡ç­¾
6. æ¨é€åˆ° Docker Hub å’Œ GHCR
7. æ›´æ–° Docker Hub README

**éªŒè¯æ–¹å¼ï¼š**
- æŸ¥çœ‹ GitHub Actions è¿è¡ŒçŠ¶æ€
- æ£€æŸ¥ Docker Hub æ ‡ç­¾é¡µé¢
- æœ¬åœ°æ‹‰å– `latest` æ ‡ç­¾éªŒè¯

---

**æœ€åæ›´æ–°ï¼š** 2025-10-11
**å½“å‰ç‰ˆæœ¬ï¼š** v1.0.1
**ç»´æŠ¤è€…ï¼š** Browser.autos Team
